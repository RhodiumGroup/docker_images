name: base
channels:
  - conda-forge
dependencies:
  - beautifulsoup4
  - boto3
  - bqplot
  - bumpversion
  - cachecontrol
  - cartopy
  - cftime
  - click
  - compilers
  - dask
  - dask-glm
  - dask-ml
  - datashader
  - distributed
  - dropbox
# need to make sure we get esmpy compiled with mpi otherwise xesmf regridding
# won't work
  - esmpy=8.0.0=mpi_mpich_py37ha9b28fa_101
  - fastparquet
  - fiona
  - fusepy
# this gcc pin is necessary b/c of a weird feature in the h553295d_15 build
# which makes it hard to build numpy-based cython extensions (like pyclaw).
# we should try removing it whenever we next do an update and see if Clawpack
# can still be built
  - gcc_linux-64=7.3.0=h553295d_14
  - gcsfs
  - gdal
  - geoalchemy2
  - geopandas
  - geopy
  - geotiff
  - geoviews
  - git
  - gitpython
  - google-cloud-container
  - google-cloud-storage
  - holoviews
  - h5netcdf
  - icu
  - jedi
# need server proxy on workers if using remote scheduler
  - jupyter-server-proxy
  - kubernetes
  - lapack
  - lz4
  - make
  - matplotlib
  - nc-time-axis
  - ncurses
  - netcdf-fortran
  - netcdf4
  - numba
  - numcodecs
  - pandas
  - pip
  - plotly
  - polyline
  - pygeos
  - pyinterp
  - pyshp
  - python
  - python-blosc
  - python-snappy
  - pyviz_comms
  - PyYAML
  - rasterio
  - regionmask
# the pinned rtree can be deleted from this requirements file once this is
# solved and a new release is made: https://github.com/Toblerity/rtree/issues/124
  - rtree=0.8.3
  - scikit-image
  - scikit-learn
  - scipy
  - seaborn
  - shapely
  - sparse
  - statsmodels
  - tini
  - unzip
  - uritemplate
  - xarray
  - xesmf
  - xgcm
  - xhistogram
  - xlrd
  - xrft
  - zarr
  - zeromq
  - zict
  - pip:
    - mapbox
    - py-noaa
    - sidecar
    - climate-toolbox
    - impactlab-tools
    - parameterize_jobs
    - git+https://github.com/rhodiumgroup/rhg_compute_tools.git@allow-remote-scheduler
    - git+https://github.com/NCAR/intake-esm.git
# need to install from master until 0.10.1
# 6762b474dd61f316bd952db0fa1d3ad96dc54174 is a known good commit but for now
# not pinning the hash
    - git+https://github.com/dask/dask-kubernetes
